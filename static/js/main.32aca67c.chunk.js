(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c,o=n(1),r=n.n(o),a=n(11),l=n.n(a),s=(n(16),n(17),n(18),n(2)),i=n.n(s),u=n(8),d=n(9),p=n(5),f=n(4);!function(e){e.all="All",e.active="Active",e.completed="Completed"}(c||(c={}));var b=n(0),j="https://mate.academy/students-api";function m(e){return new Promise((function(t){setTimeout(t,e)}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:t};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),m(300).then((function(){return fetch("".concat(j).concat(e),c)})).then((function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return e.json()}))}var O=function(e){return h(e)},v=function(e,t){return h(e,"POST",t)},x=function(e,t){return h(e,"PATCH",t)},k=function(e){return h(e,"DELETE")},T=function(e){return k("/todos/".concat(e))},_=function(e,t){return x("/todos/".concat(e),t)},g=n(3),C=n.n(g),y=function(e){var t=e.setError,n=e.onAdd,c=e.tempTodo,r=Object(o.useState)(""),a=Object(f.a)(r,2),l=a[0],s=a[1],u=function(){var e=Object(p.a)(i.a.mark((function e(c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),l.trim()){e.next=4;break}return t("Title can't be empty"),e.abrupt("return");case 4:return e.next=6,n(l);case 6:s("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("form",{onSubmit:u,children:Object(b.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:l,onChange:function(e){return s(e.target.value)},disabled:Boolean(c)})})},N=function(e){var t=e.setError,n=e.onAdd,c=e.tempTodo,o=e.toggleAllCompletedTodos,r=e.areAllCompleted;return Object(b.jsxs)("header",{className:"todoapp__header",children:[Object(b.jsx)("button",{type:"button",className:C()("todoapp__toggle-all",{active:r}),onClick:o,"aria-label":"Toggle All Completed"}),Object(b.jsx)(y,{setError:t,onAdd:n,tempTodo:c})]})},w=function(e){var t=e.todo,n=e.loadingTodoIds,c=e.onDelete,r=e.handleUpdateTodo,a=t.id,l=t.title,s=t.completed,i=Object(o.useState)(!1),u=Object(f.a)(i,2),d=u[0],p=u[1],j=Object(o.useState)(!1),m=Object(f.a)(j,2),h=m[0],O=m[1],v=Object(o.useState)(t.title),x=Object(f.a)(v,2),k=x[0],T=x[1],_=Object(o.useRef)(null);Object(o.useEffect)((function(){p(n.includes(a))}),[n,a]),Object(o.useEffect)((function(){var e;h&&(null===(e=_.current)||void 0===e||e.focus())}),[h]);var g=Object(o.useCallback)((function(){r(a,{completed:!s})}),[a,s,r]);return Object(b.jsxs)("div",{className:C()("todo",{completed:s}),children:[Object(b.jsx)("label",{htmlFor:"todo-checkbox",className:"todo__status-label",children:Object(b.jsx)("input",{type:"checkbox",id:"todo-checkbox",className:"todo__status",checked:s,onClick:g})}),h?Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),r(t.id,{title:k}),O(!1)},children:Object(b.jsx)("input",{type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:k,onChange:function(e){T(e.target.value)},onBlur:function(){""===k.trim()?c(t.id):r(t.id,{title:k}),O(!1)},onKeyUp:function(e){"Escape"===e.key&&O(!1)},ref:_})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"todo__title",onDoubleClick:function(){O(!0),T(l.trim())},children:l}),Object(b.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){c(a)},disabled:d,children:"\xd7"}),Object(b.jsxs)("div",{className:C()("modal overlay",{"is-active":n.includes(a)}),children:[Object(b.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(b.jsx)("div",{className:"loader"})]})]})]})},E=function(e){var t=e.todos,n=e.onDelete,c=e.loadingTodoIds,o=e.tempTodo,r=e.handleUpdateTodo;return Object(b.jsxs)("section",{className:"todoapp__main",children:[t.map((function(e){return Object(b.jsx)(w,{todo:e,loadingTodoIds:c,onDelete:n,handleUpdateTodo:r},e.id)})),o&&Object(b.jsx)(w,{todo:o,loadingTodoIds:c,onDelete:n,handleUpdateTodo:r})]})},A=function(e){var t=e.error,n=e.handleCloseError;return Object(b.jsxs)("div",{className:C()("notification is-danger is-light has-text-weight-normal",{hidden:!t}),children:[Object(b.jsx)("button",{type:"button",className:"delete",onClick:n,"aria-label":"Close Error"}),t]})},S=function(e){var t=e.filter,n=e.setFilter;return Object(b.jsxs)("nav",{className:"filter",children:[Object(b.jsx)("a",{href:"#/",className:C()("filter__link",{selected:t===c.all}),onClick:function(){return n(c.all)},children:"All"}),Object(b.jsx)("a",{href:"#/active",className:C()("filter__link",{selected:t===c.active}),onClick:function(){return n(c.active)},children:"Active"}),Object(b.jsx)("a",{href:"#/completed",className:C()("filter__link",{selected:t===c.completed}),onClick:function(){return n(c.completed)},children:"Completed"})]})},U=function(e){var t=e.filter,n=e.setFilter,c=e.activeTodos,o=e.completedTodos,r=e.handleClearCompletedTodos;return Object(b.jsxs)("footer",{className:"todoapp__footer",children:[Object(b.jsx)("span",{className:"todo-count",children:"".concat(c.length," items left")}),Object(b.jsx)(S,{filter:t,setFilter:n}),o.length>0&&Object(b.jsx)("button",{type:"button",className:C()("todoapp__clear-completed",{hidden:0===o.length}),onClick:r,children:"Clear completed"})]})},D=10921,I=function(){var e=Object(o.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(c.all),l=Object(f.a)(a,2),s=l[0],j=l[1],m=Object(o.useState)(null),h=Object(f.a)(m,2),x=h[0],k=h[1],g=Object(o.useState)(null),C=Object(f.a)(g,2),y=C[0],w=C[1],S=Object(o.useState)([]),I=Object(f.a)(S,2),F=I[0],P=I[1];Object(o.useEffect)((function(){var e;(e=D,O("/todos?userId=".concat(e))).then(r).catch((function(){return k("Unable to get todos")}))}),[]),Object(o.useEffect)((function(){setTimeout((function(){k(null)}),3e3)}),[x]);var B=n.filter((function(e){return!e.completed})),J=n.filter((function(e){return e.completed})),M=n.every((function(e){return e.completed})),G=Object(o.useCallback)(function(){var e=Object(p.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={title:t,userId:D,completed:!1},0,w(Object(d.a)({id:0},n)),P([0]),e.next=7,v("/todos",n);case 7:c=e.sent,r((function(e){return[].concat(Object(u.a)(e),[c])})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),k("Unable to add a todo");case 14:return e.prev=14,w(null),P([]),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[0,11,14,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),H=function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P((function(e){return[].concat(Object(u.a)(e),[t])})),e.next=4,T(t);case 4:r((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),k("Unable to delete a todo");case 10:return e.prev=10,w(null),P([]),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J.map((function(e){return H(e.id)})),e.prev=1,e.next=4,Promise.all(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),k("Unable to clear completed todos");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),L=Object(o.useCallback)(function(){var e=Object(p.a)(i.a.mark((function e(t,n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P((function(e){return[].concat(Object(u.a)(e),[t])})),e.next=4,_(t,n);case 4:c=e.sent,r((function(e){return e.map((function(e){return e.id!==t?e:c}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k("Unable to update a todo");case 11:return e.prev=11,P([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[n]),R=function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{completed:!M})})),r(t),e.prev=2,e.next=5,Promise.all(t.map((function(e){return L(e.id,{completed:!M})})));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),k("Unable to update todos");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),W=Object(o.useMemo)((function(){switch(s){case c.active:return B;case c.completed:return J;default:return n}}),[s,n]);return Object(b.jsxs)("div",{className:"todoapp",children:[Object(b.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(b.jsxs)("div",{className:"todoapp__content",children:[Object(b.jsx)(N,{setError:k,onAdd:G,tempTodo:y,toggleAllCompletedTodos:R,areAllCompleted:M}),Object(b.jsx)(E,{todos:W,onDelete:H,loadingTodoIds:F,tempTodo:y,handleUpdateTodo:L}),Object(b.jsx)(U,{filter:s,setFilter:j,activeTodos:B,completedTodos:J,handleClearCompletedTodos:K})]}),Object(b.jsx)(A,{error:x,handleCloseError:function(){k(null)}})]})};l.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.32aca67c.chunk.js.map